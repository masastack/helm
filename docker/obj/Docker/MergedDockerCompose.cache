name: dockercompose5163044026403308996
services:
  alert:
    depends_on:
      sso:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-alert-web-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5004"
      protocol: tcp
    - mode: ingress
      target: 443
      published: "5404"
      protocol: tcp
    volumes:
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/Microsoft/UserSecrets
      target: /root/.microsoft/usersecrets
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/ASP.NET/Https
      target: /root/.aspnet/https
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /app/ssl
      bind:
        create_host_path: true
  alert-dapr:
    command:
    - ./daprd
    - -app-id
    - alert
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      alert:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:alert
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  alert-service:
    depends_on:
      auth-service:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-alert-service-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5104"
      protocol: tcp
  alert-service-dapr:
    command:
    - ./daprd
    - -app-id
    - alert-service
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      alert-service:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:alert-service
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  auth:
    depends_on:
      sso:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-auth-web-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5003"
      protocol: tcp
    - mode: ingress
      target: 443
      published: "5403"
      protocol: tcp
    volumes:
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/Microsoft/UserSecrets
      target: /root/.microsoft/usersecrets
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/ASP.NET/Https
      target: /root/.aspnet/https
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /app/ssl
      bind:
        create_host_path: true
  auth-dapr:
    command:
    - ./daprd
    - -app-id
    - alert
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      auth:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:auth
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  auth-service:
    depends_on:
      dcc-service-dapr:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-auth-service-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5103"
      protocol: tcp
    restart: on-failure
  auth-service-dapr:
    command:
    - ./daprd
    - -app-id
    - alert-service
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      auth-service:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:auth-service
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  dapr-placement:
    command:
    - ./placement
    - -port
    - "50000"
    - -log-level
    - debug
    image: daprio/dapr:1.10.6
    networks:
      default: null
    ports:
    - mode: ingress
      target: 50000
      published: "50000"
      protocol: tcp
  dcc:
    depends_on:
      sso:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      ASPNETCORE_URLS: http://+:80;https://+:443;
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-dcc-web-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5002"
      protocol: tcp
    - mode: ingress
      target: 443
      published: "5402"
      protocol: tcp
    volumes:
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/Microsoft/UserSecrets
      target: /root/.microsoft/usersecrets
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/ASP.NET/Https
      target: /root/.aspnet/https
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /app/ssl
      bind:
        create_host_path: true
  dcc-dapr:
    command:
    - ./daprd
    - -app-id
    - dcc
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      dcc:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:dcc
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  dcc-service:
    depends_on:
      pm-service-dapr:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-dcc-service-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5102"
      protocol: tcp
  dcc-service-dapr:
    command:
    - ./daprd
    - -app-id
    - dcc-service
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      dcc-service:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:dcc-service
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  mc:
    depends_on:
      sso:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-mc-web-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5005"
      protocol: tcp
    - mode: ingress
      target: 443
      published: "5405"
      protocol: tcp
    volumes:
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/Microsoft/UserSecrets
      target: /root/.microsoft/usersecrets
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/ASP.NET/Https
      target: /root/.aspnet/https
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /app/ssl
      bind:
        create_host_path: true
  mc-dapr:
    command:
    - ./daprd
    - -app-id
    - mc
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      mc:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:mc
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  mc-service:
    depends_on:
      auth-service:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-mc-service-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5105"
      protocol: tcp
  mc-service-dapr:
    command:
    - ./daprd
    - -app-id
    - mc-service
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      mc-service:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:mc-service
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  middleware-elastic:
    environment:
      ES_JAVA_OPTS: -Xms512m -Xmx512m
      discovery.type: single-node
    image: registry.cn-hangzhou.aliyuncs.com/masastack/elasticsearch:7.6.2.0
    networks:
      default: null
    ports:
    - mode: ingress
      target: 9200
      published: "5200"
      protocol: tcp
    - mode: ingress
      target: 9300
      published: "5300"
      protocol: tcp
  middleware-otel:
    command:
    - --config=/etc/otel-collector-config.yaml
    depends_on:
      middleware-elastic:
        condition: service_started
      middleware-prometheus:
        condition: service_started
    image: registry.cn-hangzhou.aliyuncs.com/masastack/opentelemetry-collector-contrib:0.68.0
    networks:
      default: null
    ports:
    - mode: ingress
      target: 9023
      published: "9023"
      protocol: tcp
    - mode: ingress
      target: 4317
      published: "4317"
      protocol: tcp
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\otel\config.yaml
      target: /etc/otel-collector-config.yaml
      bind:
        create_host_path: true
  middleware-prometheus:
    command:
    - --config.file=/etc/prometheus/prometheus.yml
    image: registry.cn-hangzhou.aliyuncs.com/masastack/prometheus:v2.30.2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 9090
      published: "9090"
      protocol: tcp
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\prometheus\prometheus.yml
      target: /etc/prometheus/prometheus.yml
      read_only: true
      bind:
        create_host_path: true
  middleware-redis:
    command:
    - redis-server
    - --requirepass
    - p@ssw0rd
    image: registry.cn-hangzhou.aliyuncs.com/masastack/redis:5.0.8
    networks:
      default: null
  middleware-sqlserver:
    environment:
      ACCEPT_EULA: "Y"
      MSSQL_PID: Developer
      MSSQL_SA_PASSWORD: p@ssw0rd
    image: registry.cn-hangzhou.aliyuncs.com/masastack/sqlserver:2019-latest
    networks:
      default: null
    ports:
    - mode: ingress
      target: 1433
      published: "5433"
      protocol: tcp
  nginx:
    depends_on:
      sso:
        condition: service_started
    image: nginx
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "80"
      protocol: tcp
    - mode: ingress
      target: 443
      published: "443"
      protocol: tcp
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\nginx\nginx.conf
      target: /etc/nginx/conf.d/default.conf
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /etc/nginx/certs
      bind:
        create_host_path: true
  pm:
    depends_on:
      sso:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      ASPNETCORE_URLS: http://+:80;https://+:443;
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-pm-web-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5001"
      protocol: tcp
    - mode: ingress
      target: 443
      published: "5401"
      protocol: tcp
    volumes:
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/Microsoft/UserSecrets
      target: /root/.microsoft/usersecrets
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/ASP.NET/Https
      target: /root/.aspnet/https
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /app/ssl
      bind:
        create_host_path: true
  pm-dapr:
    command:
    - ./daprd
    - -app-id
    - pm
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      pm:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:pm
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  pm-service:
    depends_on:
      middleware-redis:
        condition: service_started
      middleware-sqlserver:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-pm-service-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5101"
      protocol: tcp
  pm-service-dapr:
    command:
    - ./daprd
    - -app-id
    - pm-service
    - -app-port
    - "80"
    - -log-level
    - debug
    - -components-path
    - /components
    depends_on:
      pm-service:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:pm-service
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  scheduler:
    depends_on:
      sso:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-scheduler-web-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5007"
      protocol: tcp
    - mode: ingress
      target: 443
      published: "5407"
      protocol: tcp
    volumes:
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/Microsoft/UserSecrets
      target: /root/.microsoft/usersecrets
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/ASP.NET/Https
      target: /root/.aspnet/https
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /app/ssl
      bind:
        create_host_path: true
  scheduler-dapr:
    command:
    - ./daprd
    - -app-id
    - scheduler
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      scheduler:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:scheduler
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  scheduler-service:
    depends_on:
      auth-service:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-scheduler-services-server:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5107"
      protocol: tcp
  scheduler-service-dapr:
    command:
    - ./daprd
    - -app-id
    - scheduler-service
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      scheduler-service:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:scheduler-service
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  scheduler-worker:
    depends_on:
      scheduler-service:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-scheduler-services-worker:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5108"
      protocol: tcp
  scheduler-worker-dapr:
    command:
    - ./daprd
    - -app-id
    - scheduler-worker
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      scheduler-worker:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:scheduler-worker
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  sso:
    depends_on:
      auth-service:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      ASPNETCORE_URLS: https://+:443;
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-auth-web-sso:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 443
      published: "5000"
      protocol: tcp
    volumes:
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/Microsoft/UserSecrets
      target: /root/.microsoft/usersecrets
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/ASP.NET/Https
      target: /root/.aspnet/https
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /app/ssl
      bind:
        create_host_path: true
  tsc:
    depends_on:
      sso:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-tsc-web-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5006"
      protocol: tcp
    - mode: ingress
      target: 443
      published: "5406"
      protocol: tcp
    volumes:
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/Microsoft/UserSecrets
      target: /root/.microsoft/usersecrets
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: C:\Users\mayue\AppData\Roaming/ASP.NET/Https
      target: /root/.aspnet/https
      read_only: true
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\ssl
      target: /app/ssl
      bind:
        create_host_path: true
  tsc-dapr:
    command:
    - ./daprd
    - -app-id
    - tsc
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      tsc:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:tsc
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
  tsc-service:
    depends_on:
      auth-service:
        condition: service_started
      middleware-elastic:
        condition: service_started
    environment:
      ADMIN_PWD: admin123
      ASPNETCORE_ENVIRONMENT: Production
      CLUSTER: Default
      CONNECTIONSTRING: '{"Server": "middleware-sqlserver", "Port": 1433,"Database":"pm","UserId":
        "sa","Password":"p@ssw0rd"}'
      DCC_SECRET: dcc_secret
      DOMAIN_NAME: masastack.com
      ELASTIC: '{"Nodes": ["http://middleware-elastic:9200"],"Index": "auth_user"}'
      ENVIRONMENT: Production
      MASA_STACK: '[{"id":"pm","service":{"id":"pm-service","domain":"http://pm-service"},"web":{"id":"pm-web","domain":"https://localhost:5401"}},{"id":"dcc","service":{"id":"dcc-service","domain":"http://dcc-service"},"web":{"id":"dcc-web","domain":"https://localhost:5402"}},{"id":"auth","service":{"id":"auth-service","domain":"http://auth-service"},"web":{"id":"auth-web","domain":"localhost:5403"},"sso":{"id":"auth-sso","domain":"https://sso"}},{"id":"alert","service":{"id":"alert-service","domain":"http://alert-service"},"web":{"id":"alert-web","domain":"https://localhost:5404"}},{"id":"mc","service":{"id":"mc-service","domain":"http://mc-service"},"web":{"id":"mc-web","domain":"https://localhost:5405"}},{"id":"tsc","service":{"id":"tsc-service","domain":"http://tsc-service"},"web":{"id":"tsc-web","domain":"https://localhost:5406"}},{"id":"scheduler","service":{"id":"scheduler-service","domain":"http://scheduler-service"},"worker":{"id":"scheduler-worker","domain":"http://scheduler-worker"},"web":{"id":"scheduler-web","domain":"https://localhost:5407"}}]'
      NAMESPACE: masastack.com
      OTLP_URL: http://middleware-otel:4317
      PROMETHEUS: http://middleware-prometheus:9090
      REDIS: '{"RedisHost": "middleware-redis", "RedisPort": 6379, "RedisDb": 0,"RedisPassword":
        "p@ssw0rd"}'
      VERSION: demo-1.0.0-rc1
    image: registry.cn-hangzhou.aliyuncs.com/masastack/masa-tsc-service-admin:demo-1.0.0-rc2
    networks:
      default: null
    ports:
    - mode: ingress
      target: 80
      published: "5106"
      protocol: tcp
  tsc-service-dapr:
    command:
    - ./daprd
    - -app-id
    - tsc-service
    - -app-port
    - "80"
    - -components-path
    - /components
    depends_on:
      tsc-service:
        condition: service_started
    image: daprio/daprd:1.10.6
    network_mode: service:tsc-service
    volumes:
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\components
      target: /components
      bind:
        create_host_path: true
    - type: bind
      source: E:\MasaStack\helm\docker\dapr\configuration
      target: /configuration
      bind:
        create_host_path: true
networks:
  default:
    name: dockercompose5163044026403308996_default